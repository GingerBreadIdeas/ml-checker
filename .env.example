# ============================================
# Database Configuration
# ============================================
# Used by: postgres, migrate (both compose files)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=ml-checker

# Used by: backend, migrate (both compose files)
DATABASE_URL=postgresql://postgres:postgres@postgres/ml-checker

# Used by: prompt-save (docker-compose.yml only)
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=ml-checker

# ============================================
# Backend Configuration
# ============================================
# Used by: backend (both compose files)
SECRET_KEY=production_secret_key_change_this

# ============================================
# Kafka Configuration
# ============================================
# Used by: backend, prompt-save (docker-compose.yml only)
SERVICE_KAFKA_HOST=kafka
SERVICE_KAFKA_PORT=29092

# Used by: kafka (docker-compose.yml only)
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:29092,OUTSIDE://0.0.0.0:9092
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:29092,OUTSIDE://localhost:9092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,OUTSIDE:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS=0
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_NUM_PARTITIONS=1
KAFKA_DEFAULT_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1

# ============================================
# Service Configuration
# ============================================
# Docker container ports
FRONTEND_PORT=5173
BACKEND_PORT=8000

# Uvicorn proxy configuration
# UVICORN_PROXY_HEADERS: Enable proxy header support (true/false)
# UVICORN_FORWARDED_ALLOW_IPS: Comma-separated IPs that can set forwarded headers
#   - Development: '*' (trust all)
#   - Production: Set to your reverse proxy IP (e.g., '172.18.0.1' for nginx)
UVICORN_PROXY_HEADERS=true
UVICORN_FORWARDED_ALLOW_IPS='*'

# Service hosts (used for external access and CORS)
# Examples:
#   - Local: localhost:5173 / localhost:8000
#   - Production: app.domainname.com / api.domainname.com
FRONTEND_HOST=localhost:5173

# Frontend environment variables (passed to Vite at build time)
# VITE_BACKEND_HOST should include protocol and domain
# Examples:
#   - Local: http://localhost:8000
#   - Production: https://api.domainname.com
VITE_BACKEND_HOST=http://localhost:8000
VITE_API_PATH=/api/v1

# ============================================
# Processing Service Configuration
# ============================================
# Used by: prompt-save (docker-compose.yml only)
MLCHECKER_ENV_TYPE=docker

# ============================================
# Zookeeper Configuration
# ============================================
# Used by: zookeeper (docker-compose.yml only)
ZOOKEEPER_PORT=2181
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# ============================================
# Kafka UI Configuration
# ============================================
# Used by: kafka-ui (docker-compose.yml only)
KAFKA_UI_PORT=8080
KAFKA_OUTSIDE_PORT=9092
KAFKA_CLUSTERS_0_NAME=ml-checker-kafka
KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:29092
KAFKA_CLUSTERS_0_ZOOKEEPER=zookeeper:2181
